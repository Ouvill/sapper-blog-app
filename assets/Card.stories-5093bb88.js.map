{"version":3,"file":"Card.stories-5093bb88.js","sources":["../../src/components/Card/Card.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import AppTag from \"../Tag/Tag.svelte\";\n  import Time from \"../Time/Time.svelte\";\n  import type { Tag } from \"../../generated/graphql\";\n  import Image from \"../Image/Image.svelte\";\n  import { onMount } from \"svelte\";\n\n  export let title: string;\n  export let about: string;\n  export let contents: string;\n  export let tags: Pick<Tag, \"name\" | \"slug\">[];\n  export let createdAt: string;\n  export let thumbnail: { title: string; url: string };\n  export let slug: string;\n\n  onMount(() => {\n    // コードブロックに、コピー用のボタンを追加\n    const codeBlocks = document.querySelectorAll(\"pre\");\n    const copyIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 448 512\" class=\"w-4 h-4\"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d=\"M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z\"/></svg>`;\n    const checkIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-4 h-4\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\" /></svg>`;\n    codeBlocks.forEach((block) => {\n      const button = document.createElement(\"button\");\n      button.classList.add(\n        \"absolute\",\n        \"right-2\",\n        \"top-2\",\n        \"rounded-md\",\n        \"text-gray-200\",\n        \"opacity-50\",\n        \"p-2\",\n        \"ring-2\",\n        \"ring-gray-500\",\n        \"ring-opacity-50\",\n        \"text-outline-none\",\n        \"hover:text-gray-500\",\n        \"hover:bg-gray-500\",\n        \"hover:opacity-100\",\n        \"hover:ring-2\",\n        \"hover:ring-gray-500\",\n        \"focus:text-gray-500\",\n        \"focus:ring-2\",\n        \"focus:ring-gray-500\",\n        \"focus:opacity-100\",\n      );\n      // エディタと同じ色\n      button.style.backgroundColor = \"#212121\";\n      button.innerHTML = copyIcon;\n      button.ariaLabel = \"コピー\";\n      const popup = document.createElement(\"div\");\n      popup.classList.add(\n        \"absolute\",\n        \"top-2\",\n        \"right-12\",\n        \"px-2\",\n        \"py-1\",\n        \"rounded-md\",\n        \"bg-gray-100\",\n        \"dark:bg-zinc-500\",\n        \"text-gray-500\",\n        \"dark:text-gray-300\",\n        \"text-sm\",\n        \"transition-opacity\",\n        \"duration-300\",\n        \"opacity-0\",\n        \"pointer-events-none\",\n      );\n      popup.textContent = \"Copied!\";\n      button.addEventListener(\"click\", () => {\n        const text = block.querySelector(\"code\")?.textContent;\n        navigator.clipboard.writeText(text);\n\n        button.innerHTML = checkIcon;\n        button.classList.remove(\"text-gray-200\");\n        button.classList.remove(\"hover:text-gray-500\");\n        button.classList.remove(\"focus:text-gray-500\");\n        button.classList.add(\"text-green-500\");\n\n        // ポップアップを表示\n        popup.classList.remove(\"opacity-0\");\n\n        // 1秒後にポップアップを消す\n        setTimeout(() => {\n          popup.classList.add(\"opacity-0\");\n          button.innerHTML = copyIcon;\n          button.classList.remove(\"text-green-500\");\n          button.classList.add(\"text-gray-200\");\n          button.classList.add(\"hover:text-gray-500\");\n          button.classList.add(\"focus:text-gray-500\");\n        }, 1000);\n      });\n\n      block.insertAdjacentElement(\"afterend\", button);\n      button.insertAdjacentElement(\"afterend\", popup);\n    });\n  });\n\n  // スクロールした時に、目次のアクティブなリンクを変更する\n  onMount(() => {\n    const contents = document.getElementById(\"contents\");\n    const headings = contents?.querySelectorAll(\"h1, h2, h3, h4, h5, h6\");\n    const links = document.querySelectorAll(\".toc-link\");\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            const id = entry.target.id;\n            links.forEach((link) => {\n              if (link.getAttribute(\"href\") === `#${id}`) {\n                link.classList.add(\"text-indigo-600\");\n                link.classList.add(\"dark:text-indigo-400\");\n              } else {\n                link.classList.remove(\"text-indigo-600\");\n                link.classList.remove(\"dark:text-indigo-400\");\n              }\n            });\n          }\n        });\n      },\n      {\n        rootMargin: \"-1px 0px -99% 0px\",\n      },\n    );\n    headings?.forEach((heading) => {\n      observer.observe(heading);\n    });\n\n    return () => {\n      observer.disconnect();\n    };\n  });\n</script>\n\n<article>\n  <div class=\"p-4\">\n    <div class=\"mx-auto max-w-3xl\">\n      <Image\n        src={thumbnail.url}\n        alt={thumbnail.title}\n        width={480}\n        height={270}\n        {slug}\n      />\n      <h1 class=\"mt-4 text-2xl font-bold md:text-4xl\" style:--tag=\"h-{slug}\">\n        {title}\n      </h1>\n      <p class=\"my-2\" style:--tag=\"time-{slug}\">\n        <Time date={createdAt} />\n      </p>\n      <p\n        class=\"break-words text-sm text-black text-opacity-80 dark:text-gray-50 dark:text-opacity-80\"\n        style:--tag=\"about-{slug}\"\n      >\n        {about}\n      </p>\n      <div\n        class=\"mt-4 flex flex-wrap items-center leading-none\"\n        style:--tag=\"tag-{slug}\"\n      >\n        {#each tags as tag (tag.slug)}\n          <AppTag {...tag} />\n        {/each}\n      </div>\n    </div>\n\n    <!-- eslint-disable-next-line svelte/no-at-html-tags -->\n    <div id=\"contents\" class=\"mx-auto mt-20 max-w-5xl\">{@html contents}</div>\n  </div>\n</article>\n"],"names":["ctx","get_key","i","insert_hydration","target","article","anchor","append_hydration","div3","div1","h1","p0","p1","div0","div2","dirty","image_changes","title","$$props","about","contents","tags","createdAt","thumbnail","slug","onMount","codeBlocks","copyIcon","checkIcon","block","button","popup","text","_a","headings","links","observer","entries","entry","id","link","heading"],"mappings":"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"}